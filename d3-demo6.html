<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="Using Transitions" content="In this demo it was demonstrated to use transition to manipulate objects by changing their attributes and adding animations with event listeners">
    <title>D3 Demo 5</title>
    <script src="https://d3js.org/d3.v4.min.js"></script>
  </head>
  <body>
    <script>
    //Transitions are used to change an object smoothly over time; animating
    //To use transitions select apply .transition() to the object
    //example: circle.transition()

    //You can specify a durtion in ms using .duration() following a transition selection. The default duration is 500ms

    //You can translate an object using .attr("cx/cy",px) and also  change color, radius and other attributes
    //A .delay() in ms can be added to wait before applying transition
    //you can chain transitions example:
    // circle.transition()
    //       .attr("cx",100)
    //       .attr("cy",100)
    //       .transition()
    //         .attr("fill","blue")

    //We can add an event listener using each("event", callback)
    // "each" Invokes the specified function for each selected element, passing in the current datum d and index i, with the "this" context of the current DOM element
    // Events include:
    // start - when the transition starts.
    // end - when the transition ends.
    // interrupt - when the transition is interrupted.

    //Note within an annoymous function this refers to the selected element
    //.each("end", function(){
    //   d3.select(this)
    // })

    //NOTE  in v4 transition.on() is used in place of each in some cases

    var canvas = d3.select("body")
                    .append("svg")
                    .attr("width", 500)
                    .attr("height", 500);

    var circle1 = canvas.append("circle")
                        .attr("cx", 350)
                        .attr("cy", 50)
                        .attr("r", 25)
                        .attr("fill", "blue");

    var circle2 = canvas.append("circle")
                        .attr("cx", 300)
                        .attr("cy", 300)
                        .attr("r", 25)
                        .attr("fill", "green");

    circle1.transition()
          .duration(1000)
          .attr("cx", 50)
          .attr("cy", 100)
          .transition()
            .delay(1000)
            .duration(3000)
            .attr("cy", 500)
            .attr("cx", 100)

    circle2.transition()
          .duration(1000)
          .attr("cx", 150)
          .attr("cy", 100)
          .transition()
            .delay(1000)
            .duration(2500)
            .attr("cy", 500)
            .on("end", function(){ //.each for v3
              d3.select(this)
                .attr("fill","red")
                .attr("r", 50)
                .transition()
                  .attr("fill","white")
            });





    </script>
  </body>
</html>
